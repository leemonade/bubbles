import { Story, Props, Source, Preview } from '@storybook/addon-docs';
import * as stories from './Tree.stories.js';
import { Tree } from './Tree.js';
import { Box } from '@mantine/core';
import { ThemeProvider } from './../../ThemeProvider';

# Tree

[Source code](https://github.com/leemonade/bubbles/tree/main/packages/components/src/navigation/Tree/Tree.js)

## Table of Contents

<!-- START doctoc generated TOC please keep comment here to allow auto update -->
<!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE -->

- [Overview](#overview)
- [Initial opened](#initial-opened)
- [Initial selected](#initial-selected)
- [Drag elements](#drag-elements)
- [Component API](#component-api)
- [References](#references)
- [Feedback](#feedback)

## Overview

Tree is a component to display information in a tree view.

<ThemeProvider>
  <Tree
    treeData={[
      {
        id: 'ID1',
        parent: 0,
        text: 'Organization A',
        actions: [
          {
            name: 'rename',
            showOnHover: false,
            icon: () => <span>R</span>,
            handler: () => alert('Handler works'),
          },
          'edit',
          {
            name: 'delete',
          },
        ],
      },
      {
        id: 'ID2',
        parent: 'ID1',
        text: 'Center A (Master)',
      },
      {
        id: 'ID3',
        parent: 'ID2',
        text: '2002 Lengua Castellana y Literatura 1',
        actions: [
          {
            name: 'rename',
            showOnHover: false,
            icon: () => <span>R</span>,
            handler: () => alert('Handler works'),
          },
          'edit',
          {
            name: 'delete',
          },
        ],
      },
      {
        id: 'ID4',
        parent: 'ID2',
        text: 'Class 2',
      },
      {
        id: 'ID2-ADD',
        parent: 'ID2',
        text: 'Add Class',
        type: 'button',
        draggable: false,
        data: {
          action: 'add',
        },
      },
      {
        id: 'ID5',
        parent: 'ID1',
        text: 'Center B',
      },
      {
        id: 'ID5-ADD',
        parent: 'ID5',
        text: 'Add Class',
        type: 'button',
        draggable: false,
        data: {
          action: 'add',
        },
      },
      {
        id: 'ID1-ADD',
        parent: 'ID1',
        text: 'Add Center',
        type: 'button',
        draggable: false,
        data: {
          action: 'add',
        },
      },
    ]}
  />
</ThemeProvider>

## Initial opened

You can render the Tree with an element opened with the `initialOpen` prop. Provide an array with the ID's of the elements.

In this case:

```js
['ID1', 'ID2'];
```

<ThemeProvider>
  <Tree
    initialOpen={['ID1', 'ID2']}
    treeData={[
      {
        id: 'ID1',
        parent: 0,
        text: 'Organization A',
        actions: [
          {
            name: 'rename',
            showOnHover: false,
            icon: () => <span>R</span>,
            handler: () => alert('Handler works'),
          },
          'edit',
          {
            name: 'delete',
          },
        ],
      },
      {
        id: 'ID2',
        parent: 'ID1',
        text: 'Center A (Master)',
      },
      {
        id: 'ID3',
        parent: 'ID2',
        text: '2002 Lengua Castellana y Literatura 1',
        actions: [
          {
            name: 'rename',
            showOnHover: false,
            icon: () => <span>R</span>,
            handler: () => alert('Handler works'),
          },
          'edit',
          {
            name: 'delete',
          },
        ],
      },
      {
        id: 'ID4',
        parent: 'ID2',
        text: 'Class 2',
      },
      {
        id: 'ID2-ADD',
        parent: 'ID2',
        text: 'Add Class',
        type: 'button',
        draggable: false,
        data: {
          action: 'add',
        },
      },
      {
        id: 'ID5',
        parent: 'ID1',
        text: 'Center B',
      },
      {
        id: 'ID5-ADD',
        parent: 'ID5',
        text: 'Add Class',
        type: 'button',
        draggable: false,
        data: {
          action: 'add',
        },
      },
      {
        id: 'ID1-ADD',
        parent: 'ID1',
        text: 'Add Center',
        type: 'button',
        draggable: false,
        data: {
          action: 'add',
        },
      },
    ]}
  />
</ThemeProvider>

## Initial selected

You can render the Tree with an element selected with the `initialSelected` prop. Provide an array with the ID's of the elements.

<ThemeProvider>
  <Tree
    initialOpen={['ID1', 'ID2']}
    initialSelected={['ID3']}
    treeData={[
      {
        id: 'ID1',
        parent: 0,
        text: 'Organization A',
        actions: [
          {
            name: 'rename',
            showOnHover: false,
            icon: () => <span>R</span>,
            handler: () => alert('Handler works'),
          },
          'edit',
          {
            name: 'delete',
          },
        ],
      },
      {
        id: 'ID2',
        parent: 'ID1',
        text: 'Center A (Master)',
      },
      {
        id: 'ID3',
        parent: 'ID2',
        text: '2002 Lengua Castellana y Literatura 1',
        actions: [
          {
            name: 'rename',
            showOnHover: false,
            icon: () => <span>R</span>,
            handler: () => alert('Handler works'),
          },
          'edit',
          {
            name: 'delete',
          },
        ],
      },
      {
        id: 'ID4',
        parent: 'ID2',
        text: 'Class 2',
      },
      {
        id: 'ID2-ADD',
        parent: 'ID2',
        text: 'Add Class',
        type: 'button',
        draggable: false,
        data: {
          action: 'add',
        },
      },
      {
        id: 'ID5',
        parent: 'ID1',
        text: 'Center B',
      },
      {
        id: 'ID5-ADD',
        parent: 'ID5',
        text: 'Add Class',
        type: 'button',
        draggable: false,
        data: {
          action: 'add',
        },
      },
      {
        id: 'ID1-ADD',
        parent: 'ID1',
        text: 'Add Center',
        type: 'button',
        draggable: false,
        data: {
          action: 'add',
        },
      },
    ]}
  />
</ThemeProvider>

## Drag elements

You can drag elements with the `allowDragParents`

<ThemeProvider>
  <Tree
    allowDragParents
    treeData={[
      {
        id: 'ID1',
        parent: 0,
        text: 'Organization A',
        actions: [
          {
            name: 'rename',
            showOnHover: false,
            icon: () => <span>R</span>,
            handler: () => alert('Handler works'),
          },
          'edit',
          {
            name: 'delete',
          },
        ],
      },
      {
        id: 'ID2',
        parent: 'ID1',
        text: 'Center A (Master)',
      },
      {
        id: 'ID3',
        parent: 'ID2',
        text: '2002 Lengua Castellana y Literatura 1',
        actions: [
          {
            name: 'rename',
            showOnHover: false,
            icon: () => <span>R</span>,
            handler: () => alert('Handler works'),
          },
          'edit',
          {
            name: 'delete',
          },
        ],
      },
      {
        id: 'ID4',
        parent: 'ID2',
        text: 'Class 2',
      },
      {
        id: 'ID2-ADD',
        parent: 'ID2',
        text: 'Add Class',
        type: 'button',
        draggable: false,
        data: {
          action: 'add',
        },
      },
      {
        id: 'ID5',
        parent: 'ID1',
        text: 'Center B',
      },
      {
        id: 'ID5-ADD',
        parent: 'ID5',
        text: 'Add Class',
        type: 'button',
        draggable: false,
        data: {
          action: 'add',
        },
      },
      {
        id: 'ID1-ADD',
        parent: 'ID1',
        text: 'Add Center',
        type: 'button',
        draggable: false,
        data: {
          action: 'add',
        },
      },
    ]}
  />
</ThemeProvider>

## Component API

<Preview>
  <Story id="molecules-navigation-tree--playground" />
</Preview>

<Props of={Tree} />

## References

[MDN: ARIA Tree role](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Roles/tree_role)

[W3: Role attribute](https://www.w3.org/WAI/PF/HTML/wiki/RoleAttribute)

[W3: ARIA Tree role example](https://www.w3.org/WAI/ARIA/apg/example-index/treeview/treeview-navigation.html)

## Feedback

Help us improve this component by providing feedback, asking questions on Slack, or updating this file on
[GitHub](https://github.com/leemonade/bubbles/edit/main/packages/components/src/navigation/Tree/Tree.mdx)
